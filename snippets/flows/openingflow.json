{
  "OpeningFlow": {
    "prefix": "ktof",
    "body": [
      "$1intents:",
      "\tintent_opening_line:", 
        "\t\ttype: \"data\"",
        "\t\tinitial: true",
        "\t\tcondition: \"payload.type == 'follow'\"",
      "\tintent_opening_telegram:", 
        "\t\ttype: \"text\"",
        "\t\tinitial: true",
        "\t\tcondition: \"content == '/start'\"",
      "\tintent_opening_qiscus:",
        "\t\ttype: \"text\"",
        "\t\tinitial: true",
        "\t\tcondition: \"content == 'Get Started'\"",
    "states:",
      "\tstate_initial:", 
        "\t\tinitial: true",
        "\t\ttransitions:",
          "\t\t\tstate_opening_bot:", 
            "\t\t\t\tcondition: \"intent == 'intent_opening_telegram' || intent == 'intent_opening_line' || intent == 'intent_opening_qiscus'\"",
            "\t\t\t\tmapping:",
              "\t\t\t\t\tdata:",
                "\t\t\t\t\t\tuserId: \"metadata.lineSenderId || metadata.fbmessengerSenderId || metadata.telegramSenderId || metadata.qiscusSenderId\"",
              "\t\t\t\t\tcontext:",
                "\t\t\t\t\t\tlineToken: \"metadata.lineAccessToken\"",
      "\tstate_opening_bot:",
        "\t\taction:", 
          "\t\t\t- name: \"opening_line\"",
            "\t\t\t\tcondition: \"metadata.channelType == 'line'\"",
          "\t\t\t- name: \"opening_text\"",
            "\t\t\t\tcondition: \"metadata.channelType == 'telegram' || metadata.channelType == 'line'\"",
          "\t\t\t- name: \"opening_text1\"",
            "\t\t\t\tcondition: \"metadata.channelType == 'line'\"",
        "\t\tend: true",
    "actions:",
      "\topening_line:",
        "\t\ttype: \"api\"",
        "\t\toptions:",
          "\t\t\tmethod: \"GET\"",
          "\t\t\theaders:",
            "\t\t\t\tAuthorization: \"Bearer $(context.lineToken)\"",
          "\t\t\turi: \"https://api.line.me/v2/bot/profile/$(data.userId)\"",
      "\topening_text:",
        "\t\ttype: \"text\"",
        "\t\toptions:",
          "\t\t\ttext:",
            "\t\t\t\t- \"Hai $(metadata.qiscusSenderName)$(result.displayName)$(result.name)$(metadata.telegramSenderName), saya adalah Shi, bot yang dapat menampilkan berita\"",
            "\t\t\t\t- \"Hallo  $(metadata.qiscusSenderName)$(result.displayName)$(result.name)$(metadata.telegramSenderName), saya adalah Shi, bot yang dapat menampilkan berita\"",
      "\topening_text1:",
        "\t\ttype: \"text\"",
        "\t\toptions:", 
          "\t\t\ttext:",
            "\t\t\t\t- \"Halo saya Bot\""

    ],
    "description": "Opening Flow"
  }
}